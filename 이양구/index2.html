<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/style2.css">
    <link href="https://fonts.googleapis.com/css2?family=Abel&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
    </style>
</head>
<body>
    <div id="wrap">
        <header id="header">
            <div class="logo">
                <canvas id="canvas"></canvas>
            </div>
            <nav class="nav">
                <ul>
                    <li class="active">Home</li>
                    <li>About</li>
                    <li>333</li>
                    <li>444</li>
                    <li>555</li>
                    <li>666</li>
                </ul>
            </nav>
        </header>
        <!-- //header -->
    
        <main id="main">
            <section id="section1">
                <div class="title">
                    <span>portfolio</span>
                    <span>Creative Coding</span>
                </div>
                <div class="mainText">
                    <span>portfolio</span>
                </div>
            </section>
            <!-- //section1 -->

            <section id="section2">
                <div class="sec2-title split" >You are now entering ( About ) section</div>

                <div class="sec2-desc">
                  <span>01</span>
                  <h3>about</h3>
                </div>

                <div class="sec2-about">
                    <div></div>
                </div>

            </section>
            <!-- //section2 -->

            <section id="section3">
              <div class="sec3-title">
                You are now entering ( About ) section
              </div>
              <div class="sec3-desc">
                <span>02</span>
                <h3>Site</h3>
              </div>
            </section>
            <!-- //section3 -->
            
            <section id="section4"></section>
            <section id="section5"></section>
            <section id="section6"></section>
            <section id="section7"></section>
        </main>
        <!-- //contents -->

    </div>
    <!-- //wrap -->
    


    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
    <script>
      gsap.set("#section1 .mainText", {fontSize: "90vh"})

      const ani1 = gsap.timeline();
      ani1.to("#section1 .mainText", {duration: 5, fontSize: "10vh",}, "a")
      ani1.to("#section1 .mainText", {duration: 1, letterSpacing: "0vw"}, "a")

      ScrollTrigger.create({
          animation: ani1,
          trigger: "#section1",
          start: "top 20px",
          end: "+=6000",
          scrub: true,
          pin: true, 
          anticipatePin: 1,
          markers: true
      });
    </script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/110/three.js"></script>
    <script src="https://supahfunk.github.io/supah-codepen/OrbitControls.110.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/split-type"></script>

    <script>
        const targets = gsap.utils.toArray(".split");

        let SplitClient = new SplitType(targets, {type: "lines, words, chars"});

        gsap.set("#section2 .sec2-title .line", {autoAlpha: 0})
        gsap.set("#section2 .sec2-title", {width: 20, height: 20})
        gsap.set("#section2 .sec2-desc span", {autoAlpha: 0})
        gsap.set("#section2 .sec2-desc h3", {autoAlpha: 0})
        gsap.set("#section2 .sec2-desc", {width: 20, height: 20})

        const ani2 = gsap.timeline();
        ani2.to("#section2 .sec2-title", {duration: 1, width: "100%", ease: "expo.out"})
        ani2.to("#section2 .sec2-title", {duration: 1, height: 40, ease: "expo.out"})
        ani2.to("#section2 .sec2-title .line", {duration: 1, stagger: 0.05, autoAlpha: 1, ease: "expo.out"})
        ani2.to("#section2 .sec2-desc", {duration: 1, width: "100%", ease: "expo.out"}, "-=3")
        ani2.to("#section2 .sec2-desc", {duration: 1, height: "80vh", ease: "expo.out"}, "-=2")
        ani2.to("#section2 .sec2-desc span", {duration: 1, autoAlpha: 1})
        ani2.to("#section2 .sec2-desc h3", {duration: 1, autoAlpha: 1})

        ScrollTrigger.create({
            animation: ani2,
            trigger: "#section2",
            start: "top center",
            end: "+=2000",
            markers: true,
            onEnter: () => {},
            onLeave: () => {}
        });
    </script>

    <script>

        const renderer = new THREE.WebGLRenderer({ 
            canvas: document.getElementById('canvas'), 
            antialias: true,
            alpha: true
        })
        renderer.setSize( 1000, 600 )

        const camera = new THREE.PerspectiveCamera( 75, 1000 / 600, 0.1, 1000 )
        camera.position.z = 8
        const scene = new THREE.Scene()

        /*--------------------
        Light
        --------------------*/
        const ambientLight = new THREE.AmbientLight(0xffffff, .5)
        scene.add(ambientLight)

        const light = new THREE.PointLight(0xffffff, .5)
        light.position.set(1, 1, 1)
        scene.add(light)


        let font = null
        const fontPath = 'https://raw.githubusercontent.com/mrdoob/three.js/master/examples/fonts/optimer_regular.typeface.json'


/*--------------------
Init
--------------------*/
let geo
let mat
let mesh
const init = () => {
  console.log('init')
  geo = new THREE.TextGeometry( 'Yanggu', {
    font: font,
    size: 1,
    height: 0.3,
    curveSegments: 100,
    bevelThickness: 0.1,
    bevelSize: 0.04,
    bevelEnabled: 0.1
  })
  
  geo.verticesNeedUpdate = true
  
  
  const vertex = `
  precision highp float;
  varying vec2 vUv;
  varying vec3 vPos;
  varying vec3 vNormal;
  uniform float uTime;

  void main() {
    vec3 pos = position;
    vUv = uv;
    vPos = pos;

    pos.z += sin((pos.x + uTime * 0.3) * 2.) * 0.3;

    vNormal = normal;
    vNormal *= pos;

    vec4 mvPosition = modelViewMatrix * vec4(pos, 1.);
    gl_Position = projectionMatrix * mvPosition;
  }
  `
  const fragment = `
  precision highp float;
  varying vec2 vUv;
  varying vec3 vPos;
  varying vec3 vNormal;

  void main() {
  vec2 uv = vUv - .5;

  vec3 normal = vNormal;
  vec3 light = vec3(-100., 30., 4.);
  float intensity = .5;
  light = normalize(light) * intensity;
  float dProd = max(0.0, dot(normal, light));
  dProd = smoothstep(1.3, 2., dProd);

  vec3 pos = vPos;
  pos.x += 1.;
  pos *= 0.8;
  vec3 col = pos + dProd;
  col.g += pos.z;

  gl_FragColor = vec4(col, 1.);
  }
  `
  
  mat = new THREE.ShaderMaterial({
    fragmentShader: fragment,
    vertexShader: vertex,
    uniforms: {
        uTime: { value: 0 }
    }
  })
  mesh = new THREE.Mesh(geo, mat)
  mesh.position.x = -1.5
  mesh.rotation.x = Math.PI * 0.11
  mesh.rotation.y = -Math.PI * 0.13
  scene. add(mesh)
}


/*--------------------
Load Font
--------------------*/
const loader = new THREE.FontLoader()
const loadFont = () => {
  loader.load(fontPath, (response) => {
    font = response
    init()
  })
}
loadFont()


/*--------------------
Renderer
--------------------*/
let time = 0
const render = () => {
  time += 0.05
  requestAnimationFrame( render )
  renderer.render( scene, camera )
  if (mat) {
    mat.uniforms.uTime.value = time
  }
}
render()



    </script>

</body>
</html>